<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Blog | Circkoooooo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yuanxin518.github.io/blog/page/2"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="前端 react webpack redux git"><meta data-rh="true" property="og:title" content="Blog | Circkoooooo"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yuanxin518.github.io/blog/page/2"><link data-rh="true" rel="alternate" href="https://yuanxin518.github.io/blog/page/2" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://yuanxin518.github.io/blog/page/2" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://58UO1EPKN3-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Circkoooooo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Circkoooooo Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Circkoooooo" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0869f753.css">
<link rel="preload" href="/assets/js/runtime~main.0c89c040.js" as="script">
<link rel="preload" href="/assets/js/main.39d4e566.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Yuanxin</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yuanxin518" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">所有内容</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/08/15/ 树相关函数的实现和ts封装"> 树相关函数的实现和ts封装</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/1/9/ pnpm安装，报错本地服务异常">pnpm 安装，报错本地服务异常</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/12/23/ monorepo下匹配不到ts的问题">2023-12-23 monorepo下匹配不到ts的问题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/10/21/ Ant Deisgn模态框内嵌Form的初始值不更新">2023-10-21 Ant Deisgn 模态框内嵌 Form 的初始值不更新</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/10/10/ netlify部署警告导致build中断">netlify 部署警告导致 build 中断</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/10/9/ contentEditable让光标到输入框最后">contentEditable 的 div 元素，让聚焦时光标到最后</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/9/13/ 浏览器环境中渲染表格"> 浏览器环境中渲染表格</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/9/1/ passing props 阻止styled-components的props绑定到原生dom上"> passing props 阻止styled-components的props绑定到原生dom上</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/8/30/ 动态生成自定义svg的解决方法"> 动态生成自定义svg的解决方法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/7/20/ github pr和变基合并提交记录"> github pr和变基合并提交记录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/7/18/ git本地管理到github的关联"> git本地管理到github的关联</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/7/15/ 页面大量dom的优化"> 页面大量dom的优化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/4/27/ webpack chunk与runtime优化"> webpack chunk与runtime优化</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/7/18/ git本地管理到github的关联"> git本地管理到github的关联</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-18T00:00:00.000Z" itemprop="datePublished">2023年7月18日</time> · <!-- -->阅读需 7 分钟</div></header><div class="markdown" itemprop="articleBody"><p>在最近和一些人解决代码上面的问题的时候，其中既有外行也有内行，也有的稍微知道一点点比如github这种。根据我所见到的情况来总结一下就是，你必须要很了解github如何去快速的创建
一个本地的仓库，然后如何去配置一个git的环境之后创建本地的git仓库，然后通过ssh或者https的连接来与github的在线仓库进行连接（我通常使用ssh来连接），如果对git和github了解
不够深刻的话，会遇到很多的问题。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="从下载git到创建git本地仓库">从下载git到创建git本地仓库<a href="#从下载git到创建git本地仓库" class="hash-link" aria-label="从下载git到创建git本地仓库的直接链接" title="从下载git到创建git本地仓库的直接链接">​</a></h2><p>我们要用github（或者gitlab等等）去管理代码，首先要做的是对本地的git仓库进行管理。那么<strong>第一点是下载git这个软件，在git的官网直接下载git的程序，下载完成之后对git进行环境变量的配置，这样我们就可以在任意的终端中使用git的所有命令了。</strong></p><p>接下来我们要创建本地的git管理仓库，首先要将终端的路径选择到我们要创建git管理的文件夹地址，使用命令</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样下来git帮我们初始化了仓库，你可以发现当前文件夹中自动创建了一个.git的文件，依靠这个文件就可以通过git来管理仓库中的代码。 <code>ls -a(linux/macos显示当前目录所有文件)</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="管理代码">管理代码<a href="#管理代码" class="hash-link" aria-label="管理代码的直接链接" title="管理代码的直接链接">​</a></h2><p>所谓管理代码，就是对本地的代码进行记录，记录我们的修改，记录我们的提交历史等等。其中比较常用的命令也就是</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git add . //添加所有的文件到暂存区</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git commit -m &quot;提交内容&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git log //查看提交历史</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这些都是git的命令，为了更好的了解它们，应该到git的官网中详细的了解git的命令和规则。 这里我们的重点是如何通过本地代码来关联到github上面，实现github在线托管我们的代码。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关联github仓库ssh">关联github仓库（ssh）<a href="#关联github仓库ssh" class="hash-link" aria-label="关联github仓库（ssh）的直接链接" title="关联github仓库（ssh）的直接链接">​</a></h2><p><strong>问题现在就来了，在github创建了仓库，但是本地如何知道哪个github账号是我们的?</strong></p><p>ssh的连接是通过公钥和私钥的方式来连接的，所以我们要做的是在本地生成一些密钥，然后在github上面注册。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-为git配置全局的属性">1. 为git配置全局的属性<a href="#1-为git配置全局的属性" class="hash-link" aria-label="1. 为git配置全局的属性的直接链接" title="1. 为git配置全局的属性的直接链接">​</a></h3><p>这样的作用是为git的命令提供一些参数，如果遇到user.name的参数那么就会使用后面的值，那么我们要用到github所以就把它们设置成github账号相关的值。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git config --global user.name &quot;name&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git config --global user.email &quot;email&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-生成私钥和公钥">2. 生成私钥和公钥<a href="#2-生成私钥和公钥" class="hash-link" aria-label="2. 生成私钥和公钥的直接链接" title="2. 生成私钥和公钥的直接链接">​</a></h3><p>输入以下命令之后就会出现一些提示，根据提示来选择即可。通常都选是，（有yes/no的可能默认为no，手动输入yes）。提示生成了密钥的路径，找到 <strong>.pub后缀的这个就是公钥</strong>。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ssh-keygen -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-github绑定公钥">3. github绑定公钥<a href="#3-github绑定公钥" class="hash-link" aria-label="3. github绑定公钥的直接链接" title="3. github绑定公钥的直接链接">​</a></h3><p>在github的设置里面，侧边菜单栏里面有一个SSH相关的选项，进去点击<strong>add key</strong>，那么把私钥的内容复制到下面的输入框，上面的标题填写自己想要的，点击添加提示添加成功那么说明github和本机已经配置好了ssh连接的一些内容，接下来通过ssh来连接即可。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-配置ssh">4. 配置ssh<a href="#4-配置ssh" class="hash-link" aria-label="4. 配置ssh的直接链接" title="4. 配置ssh的直接链接">​</a></h3><p>找到github仓库，点击绿色的大按钮，下面就有ssh了，复制ssh的内容。</p><p>接下来，到本地的仓库文件夹下打开文件夹，来添加远程git仓库的源。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git remote add origin(origin可以自己取名字) main &quot;git@github.com:.......&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>把复制的ssh的内容放在引号里面，这样回车确认之后如果没有提示错误应该就是配置好了。通过下列的命令来确认，会发现显示了一些fetch等等以及仓库地址等信息，可以检查是否是正确的。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git remote -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-推送代码到远程分支">5. 推送代码到远程分支<a href="#5-推送代码到远程分支" class="hash-link" aria-label="5. 推送代码到远程分支的直接链接" title="5. 推送代码到远程分支的直接链接">​</a></h3><p>接下来<strong>我们要把相应的分支推送到远程github仓库对应的分支（如果远程没有这个分支，会自动的创建）</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git branch //检查所有分支</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git chekout branch_name //切换到branch_name分支</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>这里有一个需要注意的点就是，我们在没有做add和commit的时候，branch不会显示任何内容。</strong></p><p>通过上面的命令已经切换到了我们需要推送的分支，前面我们也通过<code>git add .</code> <code>git commit ....</code>把修改的代码提交了，接下来是要进行push。</p><p><strong>如果我们的本地仓库版本和远程不一样，那么会造成代码的冲突，我们在push之前务必进行pull。</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git pull origin main</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git push -u origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以后我们只需要通过<code>add</code> <code>commit</code> <code>pull</code> <code>push</code>这一套流程，就可以完成代码的推送了。当然其中会遇到很多的坑，结合网络，会很容易解决的。</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/7/15/ 页面大量dom的优化"> 页面大量dom的优化</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-15T00:00:00.000Z" itemprop="datePublished">2023年7月15日</time> · <!-- -->阅读需 5 分钟</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于dom优化的情况">关于dom优化的情况<a href="#关于dom优化的情况" class="hash-link" aria-label="关于dom优化的情况的直接链接" title="关于dom优化的情况的直接链接">​</a></h2><p>页面中有大量dom需要优化的情况可能分为2种，一种是大量的dom刚好铺满一个屏幕，另外一种是大量的dom渲染到一个页面上并且超出了一个屏幕。</p><p>对于前者，举例一种情况就是需要渲染<strong>几百个图片</strong>在一个完整的页面上，可能看到几百个图片的img标签并不是像百万级那么夸张，但是对于这样的渲染仍然还是有很多值得优化的空间。</p><p>对于后者，在前者的基础上还会加入一个对滚动时的优化，因为dom非常的多导致滚动的时候会掉帧，那么需要进行滚动优化，<strong>虚拟化列表</strong>就是其中的一个解决方法。</p><p><strong>对于滚动采用虚拟化列表即可解决了，这里只讲解如何优化dom的渲染性能</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dom的渲染优化">dom的渲染优化<a href="#dom的渲染优化" class="hash-link" aria-label="dom的渲染优化的直接链接" title="dom的渲染优化的直接链接">​</a></h2><p>如果我们要渲染几百个页面，现在我们用原生的js来做演示，那么我们需要创建几百个dom之后append到父元素中。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const parent = document.getElementById(&quot;parent&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//循环800次</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for(let i = 0; i &lt; 800; i++){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const img = document.createElement(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    img.src = &quot;....jpg&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    parent.appendChild(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样的逻辑会创建800个dom并且渲染到这个parent容器中（parent是一个div标签）。<strong>当我们执行的时候，如果机器性能不是及其顶尖，那么你会发现页面会处于一个较长时间的加载中，并且你会发现如果你放一个按钮在页面上，这个时候你鼠标点击按钮是不能相应的，因为主线程正在被占用来渲染800个dom。</strong>到这里就出现了第一个优化的点<strong>异步加载</strong>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="异步加载">异步加载<a href="#异步加载" class="hash-link" aria-label="异步加载的直接链接" title="异步加载的直接链接">​</a></h3><p>异步加载我们就要使用到异步任务来进行dom的渲染，其中setTimeout这个定时器api就可以实现异步任务，setTimeout将执行的函数放入到异步任务队列中，当主线程的任务执行完成之后就进入到异步任务来执行这个任务，所以我们的主线程始终是不会被阻塞的。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function createDOM(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    setTimeout(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const img = document.createElement(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        img.src = &quot;....jpg&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        parent.appendChild(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },50)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>经过上面的封装，我们把createDOM封装成了一个创建一个异步任务来渲染一次dom的逻辑，那么我们要渲染800个就需要调用800次createDOM。其中设置定时器的时间间隔为50毫秒，那么每隔50毫秒就会创建一个dom并添加到父容器中，并且会发现它在渲染的时候我们的鼠标以及页面都不会被阻塞卡住，仍然可以触发一些事件。</p><p><strong>提到了异步加载，还有一个比较重要的api，requestAnimationFrame。</strong>这个api在动画中也很常用，它的作用是在一帧渲染之后执行函数，至于每秒渲染多少帧，通常根据屏幕目前刷新率来确定。在更多情况下使用这个api具有更大的优势。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const count = 800</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let current = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function createDOM(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(current &gt;= count) return</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const img = document.createElement(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    img.src = &quot;....jpg&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    parent.appendChild(&quot;img&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    current++</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    requestAnimationFrame(createDOM)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">requestAnimationFrame(createDOM)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://juejin.cn/post/7062178363800027173" target="_blank" rel="noopener noreferrer">requestAnimationFrame的讲解</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/4/27/ webpack chunk与runtime优化"> webpack chunk与runtime优化</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-27T00:00:00.000Z" itemprop="datePublished">2023年4月27日</time> · <!-- -->阅读需 10 分钟</div></header><div class="markdown" itemprop="articleBody"><p>在学习 webpack 的过程中，遇到了一个 webpack 的运行时代码所带来的问题。</p><p>比如<code>optimization</code>中<code>runtimeChunk</code>的配置等，会出现带有 runtime 的文件，在我们使用<strong>output.dependOn 属性配置</strong>的时候，也会生成 runtime 标识的文件，那么这个 runtime 文件到底是什么？</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const path = require(&quot;path&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> mode: &quot;development&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">  entry: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    index: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">      import: &quot;./src/index.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">      dependOn: &quot;shared&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    &quot;other-bundle&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">      import: &quot;./src/other-bundle.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">      dependOn: &quot;shared&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    shared: &quot;lodash&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> output: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   filename: &quot;[name].[contenthash].bundle.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   path: path.resolve(__dirname, &quot;dist&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   clean: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> plugins: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   new HtmlWebpackPlugin({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     title: &quot;资源输出&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     filename: &quot;webpack.html&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面这是一个<code>webpack.config.js</code>的配置文件，其中的重点就在<code>entry</code>里面，看到其中配置了一个<code>dependOn</code>，然后依赖的是一个新的入口文件，那么理论上生成文件就会有至少 3 个，<code>index.[hash].js</code>，<code>other-bundle.[hash].js</code>和<code>shared.[hash].js</code>。现在没有什么问题，就是我们简单的配置了 3 个入口文件，然后其中 2 个依赖与另外一个 chunk 文件，其中包含的是<code>lodash</code>这个库，所以<code>shared.[hash].js</code>中存放的是 lodash 的代码。然后继续看下面的说明</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimizationruntimechunk">optimization.runtimeChunk<a href="#optimizationruntimechunk" class="hash-link" aria-label="optimization.runtimeChunk的直接链接" title="optimization.runtimeChunk的直接链接">​</a></h3><p><strong>现在我们引入一个新的配置，<code>optimization.runtimeChunk</code>。对于 runtimeChunk 设置为&#x27;single&#x27;的作用就是，为所有的 chunk 文件生成一个共享的 runtime 的文件，这样所有对模块引入或者初始化的代码都在这个共享文件中实现。设置成&#x27;true&#x27;（或者&#x27;multiple&#x27;）就会为每一个 chunk 生成一个单独的 runtime 的文件。</strong></p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const path = require(&quot;path&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module.exports = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> mode: &quot;development&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> entry: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   index: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     import: &quot;./src/index.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     dependOn: &quot;shared&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;other-bundle&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     import: &quot;./src/other-bundle.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     dependOn: &quot;shared&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   shared: &quot;lodash&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">  optimization: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">    runtimeChunk: true,//默认是false，true对应的是&#x27;multiple&#x27;，还可以选择&#x27;single&#x27;。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> output: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   filename: &quot;[name].[contenthash].bundle.js&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   path: path.resolve(__dirname, &quot;dist&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   clean: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> plugins: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   new HtmlWebpackPlugin({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     title: &quot;资源输出&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     filename: &quot;webpack.html&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   }),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那么我们设置了这个属性之后进行编译，产生的文件会多出一个<code>runtime~shared.....</code>的文件。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-文件的内容">runtime 文件的内容<a href="#runtime-文件的内容" class="hash-link" aria-label="runtime 文件的内容的直接链接" title="runtime 文件的内容的直接链接">​</a></h3><p>我们现在要知道<code>runtime~shared...</code>是怎么和<code>shared.....js</code>文件联系起来的，这样就可以分析为什么能够生成出一个 runtime 文件来。</p><p>下面是<code>shared.js</code>生成的入口 js 文件的代码开头，看的出来是往一个数组<code>self[....]</code>中 push 了一些数组，通过注释和测试环境的代码，可以分析出来这个数组中设置了一个对象，是我们之前在<code>shared.js</code>中引入的 lodash 的代码。<strong>那么这个 self 显然是一个全局的对象，然后现在我们给他 push 了一些值。</strong>那么这个属性我们接下来再<code>runtime</code>文件中看一看。</p><p><strong>shared.xxxxx.js</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> or disable the </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> devtool </span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;devtool: false&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token maybe-class-name">If</span><span class="token plain"> you are looking </span><span class="token keyword control-flow" style="font-style:italic">for</span><span class="token plain"> production</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">ready output files</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> see mode</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;production&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">webpack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">js</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">org</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">configuration</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">mode</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;webpackChunkwebpack_learn&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;webpackChunkwebpack_learn&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;shared&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/***/</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./node_modules/lodash/lodash.js&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*!***************************************!*\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  !*** ./node_modules/lodash/lodash.js ***!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  \***************************************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/***/</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> exports</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> __webpack_require__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">eval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">          &quot;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* module decorator */</span><span class="token plain"> module </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> __webpack_require__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">nmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\nvar __WEBPACK_AMD_DEFINE_RESULT__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**\n * @license\n * Lodash &lt;https://lodash.com/&gt;\n * Copyright OpenJS Foundation and other contributors &lt;https://openjsf.org/&gt;\n * Released under MIT license &lt;https://lodash.com/license&gt;\n * Based on Underscore.js 1.8.3 &lt;http://underscorejs.org/LICENSE&gt;\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors\n */</span><span class="token plain">\n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used as a safe reference for `undefined` in pre-ES5 environments. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token keyword nil" style="font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used as the semantic version number. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">VERSION</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;4.17.21&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used as the size to enable large array optimizations. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">LARGE_ARRAY_SIZE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Error message constants. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">CORE_ERROR_TEXT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Unsupported core-js use. Try https://npms.io/search?q=ponyfill.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">\n      </span><span class="token constant" style="color:rgb(130, 170, 255)">FUNC_ERROR_TEXT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Expected a function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">\n      </span><span class="token constant" style="color:rgb(130, 170, 255)">INVALID_TEMPL_VAR_ERROR_TEXT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Invalid `variable` option passed into `_.template`&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used to stand-in for `undefined` hash values. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">HASH_UNDEFINED</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;__lodash_hash_undefined__&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used as the maximum memoize cache size. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">MAX_MEMOIZE_SIZE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used as the internal argument placeholder. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">PLACEHOLDER</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;__lodash_placeholder__&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">\n\n  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** Used to compose bitmasks for cloning. */</span><span class="token plain">\n  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">CLONE_DEEP_FLAG</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">\n      </span><span class="token constant" style="color:rgb(130, 170, 255)">CLONE_FLAT_FLAG</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">\n      </span><span class="token constant" style="color:rgb(130, 170, 255)">CL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>下面是对应的 runtime 的代码，找到了这样的代码。其中对现在已有的 self 中的值进行调用<code>webpackJsonpCallback</code>（调用前执行了 bind 绑定，这个场景下是 null）。
然后<strong>重写了 push，将 push 重写成了 webpackJsonpCallback 中实现的方法，最后会移动到</strong>webpack_require<strong>.0 的逻辑中去。</strong>也就是说在此之后在 self<!-- -->[&#x27;webpackChunkwebpack_learn&#x27;]<!-- -->中的 push 操作，都会被以这里的逻辑来执行。显然 runtime 文件会优先于入口文件去引入到 html 中。</p><p><strong>shared.runtime.xxxx.js</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">                installedChunks</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">chunkId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">            </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> __webpack_require__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">O</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">        </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> chunkLoadingGlobal </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;webpackChunkwebpack_learn&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;webpackChunkwebpack_learn&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">        chunkLoadingGlobal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">webpackJsonpCallback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">        chunkLoadingGlobal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">push</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> webpackJsonpCallback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> chunkLoadingGlobal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">chunkLoadingGlobal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/************************************************************************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>那么现在就知道了，我们生成的这个 runtime 的文件，实际上是对入口文件模块的处理。我们在入口文件中会将模块的所有加载进行执行，<strong>生成 runtime 文件之后，在入口文件中对模块的处理的逻辑就会被转移到这个 runtime 文件中来执行。</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="关于-runtime-代码的处理">关于 runtime 代码的处理<a href="#关于-runtime-代码的处理" class="hash-link" aria-label="关于 runtime 代码的处理的直接链接" title="关于 runtime 代码的处理的直接链接">​</a></h3><p>那么，现在比如我们有 2 个 js 文件，其中都引入了 lodash 的库。在我们不设置任何对 runtime 有影响的 webpack 的配置的时候，打包后<code>lodash</code>的模块会被加入到这 2 个打包的 js 文件中去。当我们对这 2 个 js 文件设置一个<code>dependOn</code>属性，<strong>然后<code>dependOn</code>的模块依赖的是<code>lodash</code>，打包后会发现我们之前的 2 个 js 文件中的<code>lodash</code>的代码都被转移到了一个新的 chunk 文件中去。那么这就是我们第一个使用方法，就是对重复模块的抽离。</strong></p><p>这里没有很好的体现我们对运行时代码的利用，但是在下面的一个例子很能体现。同样是 2 个 js 文件，还有一个<code>count.js</code>中导出了一个对象，其中的 value 属性为 0，我们在另外 2 个 js 文件中都实现的是对这个对象的值自增。</p><p><strong>首先我们不对 runtime 进行任何的处理，显然这个时候<code>count.js</code>会分别存在于那 2 个 js 文件中，那么这个时候如果在 html 中来引入解析的话，结果就是独立的 2 个对 count 对象进行初始化的代码，形成的也是 2 个独立的作用域。</strong></p><p>那么这个时候我们设置<code>optimization.runtimeChunk=&#x27;single&#x27;</code>，让所有一切的 chunk 都形成一个<code>runtime</code>，这样这 2 个 js 文件中所有的内容都会 push 到 runtime 文件中去（push 显然就是上面提到过的被重写的 push），那么最终所有的作用域都会在<code>runtime</code>文件中形成，通过 webpack 对重复 module 的过滤处理等，最终重复的模块全部都会在这个 runtime 中引入一次。</p><p><strong>实际上，无论我们设不设置<code>optimization</code>这个参数，最终的模块都会通过 webpack 的运行时的函数去加载，第一个例子在优化前是<code>lodash</code>分别在 2 个运行时代码中加载，在我们设置<code>dependOn</code>之后就是将这 2 个运行时抽离成一个独立的 chunk 来通过运行时加载<code>lodash</code>。</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多-runtimechunk">多 runtimeChunk<a href="#多-runtimechunk" class="hash-link" aria-label="多 runtimeChunk的直接链接" title="多 runtimeChunk的直接链接">​</a></h3><p>也就是设置<code>optimization.runtimeChunk=true</code>，这个时候，webpack 会对每一个 chunk 文件进行修改，让其中的逻辑转移到 runtime 中去执行。虽然每个 chunk 生成了单独的 runtime 的文件，但是一般情况下 runtime 文件中都是执行一样的逻辑，上面提到的对<code>self</code>中对象的引用也都是同一个，所以这个时候上面提到的<code>count</code>也还是只是被初始化一次的。但是在官网中代码分离板块中提到过，如果使用多入口的时候，还是要设置<code>optimization.runtimeChunk=single</code>，这样至少可以确保百分之不会造成模块的多次实例化等错误。</p></div></article><nav class="pagination-nav" aria-label="博文列表分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog"><div class="pagination-nav__label">较新的博文</div></a></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.0c89c040.js"></script>
<script src="/assets/js/main.39d4e566.js"></script>
</body>
</html>